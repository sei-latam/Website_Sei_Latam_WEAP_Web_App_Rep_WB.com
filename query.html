<!doctype html>
<html>

<head>
  <title> Consultas </title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/menu.js"></script>
  <style>
    .menu-query {
      color: rgb(255, 255, 255) !important;
      opacity: 1 !important;
      font-weight: 700 !important;
    }
  </style>
</head>

<body>
  <div class="menu-container"></div>
  <div class="content-container">
    <!--Start Header-->
    <div class="banner">
      <div class="banner-table flex-column" style="background-color: rgba(0, 0, 0, 0.5);">
        <div class="flex-row">
          <div class="flex-item flex-column">
            <h1 class="add-top-margin-small">Consultas, filtros y análisis espaciales/temporales</h1>
          </div>
        </div>
      </div>
    </div>
        <!--End Header-->
    <!-------------------------------------------------------------------------------------------->    
    <div class="content">
      <div class="content-table flex-column">
        <!-------------------------------------------------------------------------------------------->
        <!--Start Text with Centered Image and Table-->
        <div class="flex-row">
          <div class="flex-item flex-column">
            <h2 id="centered-image-and-table" class="no-top-margin">Paneles de consultas, descargas y visualización </h2>
            <hr>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/Front_End_WEAP_WebAppRepWB.gif" target="_blank" class="image max-width-1000">
              <img src="img/Front_End_WEAP_WebAppRepWB.gif">
            </a>
          </div>
        </div>
        <div class="flex-row">   
          <p class="text text-center graph-title">
              1) Selección de Mapas Base.
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros: Librería y repositorio SnazzyMaps en Google Maps JavaScript API para la creación de los mapas base “Alta vegetación”, “Baja vegetación” y “Alto contraste”. 
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Configurar y definir cada uno de los mapas base, buscando personalizar y modificar el estilo visual utilizando los widgets ui.Buttom () y la función onClick (activación o desactivación del mapa base).</li>
                  <li>Mapa base iconChange o alta vegetación: Estilo minimalista con alto contraste, que invierte la luminosidad en el mapa y reduce el brillo general. Además, oculta determinados iconos (puntos de interés, etiquetas, lugares administrativos, etc.). </li>
                  <li>Mapa base baseChange o baja vegetación: Estilo con alto énfasis en elementos naturales (ríos, lagos, lagunas, montañas, cobertura vegetal, etc), invirtiendo la luminosidad y ocultando los mismos iconos que el iconChange</li>
                  <li>Mapa base Multibrand o alto contraste: Estilo detallado y sofisticado, ideal para branding o visualizaciones temáticas, con etiquetas visibles y colores personalizados (carreteras, paisajes y agua en tonos oscuros). Asimismo, un alto contraste entre texto y fondo.</li>              
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte inferior izquierda del mapa, con la opción de seleccionar diferentes mapas base: Alta vegetación, Baja vegetación, Alto contraste, mapa de relevo y satélite (estos dos últimos configurados por defecto en Google Earth Engine).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/1Basemaps.gif" target="_blank" class="image max-width-1000">
              <img src="img/1Basemaps.gif">
            </a>
          </div>
        </div>

            
        <div class="flex-row">   
          <p class="text text-center graph-title">
              2) Selección de variable y actualización de leyenda
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros: ImageCollections mensuales y anuales diferenciadas para cada variable (Tas, Prec, Run, ETReal y ETRef) con sus respectivos valores mínimos (.min) y máximos (.max). Al igual que, diferentes simbologías y paletas de colores (10 intervalos) según la variable.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Selector de variable usando ui.Select(): se crea un menú desplegable con las variables mensuales y anuales, luego se llaman las funciones updateMap() y updateLegend() con la variable seleccionada.</li>
                  <li>Activación de las funciones updateMap() y updateLegend(): la función updateMap() permite adicionar la variable seleccionada al mapa principal (mapPanel), limpiando variables seleccionadas previamente. De la misma forma, la función updateLegend() crea la leyenda según la variable seleccionada con sus respectivos intervalos y valores.</li>
                  <li>Botón para limpiar la leyenda: se crea un ui.Buttom() que le permite al usuario limpiar la leyenda dentro de la aplicación.</li>
                  <li>Adición de todos los ítems al panel máster (master_panel) usando ui.Panel(): se hace un llamado al panel máster declarado previamente y se le adicionan los ítems.</li>              
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte central izquierda dentro del mapa, con la opción de seleccionar tanto variables mensuales como anuales, con su respectiva legenda, paleta de colores y rangos (mínimos y máximos).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/2SelectMonthlyVariable.gif" target="_blank" class="image max-width-1000">
              <img src="img/2SelectMonthlyVariable.gif">
            </a>
          </div>
        </div>

               
        <div class="flex-row">   
          <p class="text text-center graph-title">
              3) Series de tiempo por puntos y variables
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros: ImageCollections mensuales y anuales diferenciadas para cada variable (Tas, Prec, Run, ETReal y ETRef) según las unidades de medida, grados Celsius (°C) para la temperatura y milímetros para las demás variables.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Cajas de texto para ingresar coordenadas lonInput y latInput usando ui.Textbox(): son creadas dos cajas de texto que reciben las coordenadas ingresadas por el usuario.</li>
                  <li>Selector de variable usando ui.Select(): se crea un menú desplegable con las variables mensuales y anuales, para luego ser enviada la variable seleccionada como input.</li>
                  <li>Botón para generar el gráfico ui.Buttom(): botón que activa la creación del punto, la selección de la variable de interés. Al igual que, un gráfico utilizando ui.Chart.image.series()</li>
                  <li>Gráfico de serie temporal usando ui.Chart.image.series(): gráfico de serie temporal que estima la media utilizando la técnica de reducción ee.Reducer.mean()</li>
                  <li>Despliegue de todos los ítems anteriores usando ui.Panel(): una vez creada la consulta, se llaman los paneles inputPanel y chartPanel2, los cuales agregan los botones y gráficos de series temporales en la parte visual de la aplicación.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte central del panel de consultas, con la opción de insertar coordenadas (longitud y latitud) en la variable seleccionada. De la misma forma, se crea un botón que le permite al usuario visualizar o plotear las series de tiempo en el punto insertado. El gráfico creado en GEE permite descargar los datos consultados en formato (.csv).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/3QueryPoints.gif" target="_blank" class="image max-width-1000">
              <img src="img/3QueryPoints.gif">
            </a>
          </div>
        </div>


        <div class="flex-row">   
          <p class="text text-center graph-title">
              4) Series de tiempo dibujando polígonos y seleccionando variables 
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros: ImageCollections mensuales y anuales con su respectiva banda según la variable (Tas, Prec, Run, ETReal y ETRef).
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Botón para empezar a dibujar un polígono usando ui.Buttom(): se crea un botón que le permite al usuario empezar a dibujar un polígono para luego enviar la ‘geometría’ del polígono a las funciones startDrawin() y drawingTools()</li>
                  <li>Selector de variable usando ui.Select(): se crea un menú desplegable con las variables mensuales y anuales, para luego ser enviada la variable seleccionada como input.</li>
                  <li>Botón para crear el gráfico de la serie temporal usando ui.Buttom(): se crea un botón que activa las funciones previas junto con la función plotTimeSeries()</li>
                  <li>Activación de las funciones startDrawin(), drawingTools() plotTimeSeries(): Una vez el usuario realiza los pasos anteriores, GEE usara startDrawin() y drawingTools() para dibujar el polígono dentro del mapa. Posteriormente, la función plotTimeSeries() recibirá los parámetros (variable y polígono) para la creación del gráfico de serie temporal mediante ui.Chart.image.series()</li>
                  <li>Despliegue de todos los ítems anteriores usando ui.Panel(): una vez creada la consulta, se llama el panel chartPanel3, el cual agrega visualmente en la aplicación los botones y gráficos de las series temporales.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte inferior del panel de consultas (justo debajo de la consulta por puntos y coordenadas) con la opción de dibujar un polígono y una variable. Asimismo, se crea un botón que le permite al usuario visualizar o plotear las series de tiempo en base al polígono dibujado. El gráfico de la serie temporal permite descargar los datos consultados en formato (.csv).
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/4QueryDraPolygons.gif" target="_blank" class="image max-width-1000">
              <img src="img/4QueryDraPolygons.gif">
            </a>
          </div>
        </div>

          
        <div class="flex-row">   
          <p class="text text-center graph-title">
              5) Adición de imágenes por fecha y variable 
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros:ImageCollections mensuales con sus respectivas bandas según la variable (´temperatura’, ´precipitación’, ‘escorrentía’, ‘etreal’ y ‘etref’). También, se requiere de establecer los valores mínimos (.min) y máximos (.max), diferentes simbologías y paletas de colores (10 intervalos) por cada variable.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Selector de variable usando ui.Select(): se crea un menu desplegable con las diferentes variables mensuales para que el usuario seleccione una.</li>
                  <li>Barra deslizante dinámica usando ui.DateSlider(): se crea un componente dinámico que muestra todos los meses y años comprendidos entre 1980 y 2020 para que el usuario seleccione un mes dentro de este intervalo.</li>
                  <li>Botón para adicionar la imagen mensual seleccionada usando ui.Buttom(): se crea un botón que recibe como parámetro la imagen mensual seleccionada por el usuario.</li>
                  <li>Creación de la función displayImage_t(): se crea una función que recibe la variable y el mes seleccionado por el usuario, para posteriormente activar el botón ‘Adicionar imagen(es) 🖼’ y enviar la imagen al mapa principal (mapPanel) de la aplicación.</li>
                  <li>Despliegue de todos los ítems anteriores usando ui.Panel(): una vez creada la consulta, se llaman los paneles panel_sli y chartPanel4, los cuales agregan la selección, la barra deslizante y el botón en la parte visual de la aplicación.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de un panel localizado en la parte inferior derecha de la aplicación (justo debajo de las consultas por puntos y polígonos) con la opción de agregar una o más imágenes al mapa principal. 
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/5QueryTimeSlider.gif" target="_blank" class="image max-width-1000">
              <img src="img/5QueryTimeSlider.gif">
            </a>
          </div>
        </div>


        <div class="flex-row">   
          <p class="text text-center graph-title">
              6) Importe de archivos externos (.Kml .Shp .GeoJSON) 
          </p>
                <p class="text" style="text-align: justify;">
                Inputs o parámetros: ImageCollections mensuales con sus respectivas bandas según la variable (´temperatura’, ´precipitación’, ‘escorrentía’, ‘etreal’ y ‘etref’). Al igual que, archivos de extensión Keyhole Markup Language (.KML), Shapefile (.shp) o GeoJSON.
                </p>

                <p class="text" style="text-align: justify;">
                Antes de realizar la inserción de los datos en GEE, el usuario debe primero de convertir los archivos de extensión .KML y .shp a GeoJSON, para ello puede utilizar herramientas online como https://mapshaper.org/.
                </p>             
          
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Creación de un nuevo panel usando ui.Panel(): se crea un panel para mostrar diferentes widgets y funciones.</li>
                  <li>Selector de variable usando ui.Select(): se crea un menú desplegable con las diferentes variables mensuales para que el usuario escoja una.</li>
                  <li>Cajas de texto para filtrar fechas (inicial y final) usando ui.Textbox(): son creadas dos cajas de texto para que el usuario ingrese fechas siguiendo el formato 'YYYY-MM.DD'.</li>
                  <li>Cajas de texto para ingresar el archivo GeoJSON usando ui.Textbox(): son creadas dos cajas de texto, la primera para que el usuario escriba el nombre del archivo GeoJSON a importar y la segunda para ingresar los atributos del archivo GeoJSON.</li>
                  <li>Creación de la función para leer archivos GeoJSON usando ui.Buttom(): se crea un botón que activa el proceso de lectura de los atributos del archivo GeoJSON (tipo de geometría, coordenadas, proyección, etc.). Posteriormente, son enviados los atributos como parámetros a una función que agrega al mapa los atributos y crea el grafico de series de tiempo.</li>
                  <li>Despliegue de todos los ítems anteriores usando ui.Panel(): una vez creada la consulta, se llama un panel, el cual agrega visualmente en la aplicación los botones y gráficos de las series temporales.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte derecha inferior del panel de consultas, el cual le permite al usuario importar o cargar archivos GeoJSON en la aplicación, crear gráficos y consultas por series de tiempo. 
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/5QueryTimeSlider.gif" target="_blank" class="image max-width-1000">
              <img src="img/5QueryTimeSlider.gif">
            </a>
          </div>
        </div>

        <!-------------------------------------------------------------------------------------------->
        <!--Start Credits-->
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <p class="text text-small text-italic add-top-margin-large">
              Credits: <span class="highlight-text">Organization One</span>: Author One and Author Two / <span class="highlight-text">Organization Two</span>: Author Three and Author Four
            </p>
          </div>
        </div>
        <!--End Credits-->
        <!-------------------------------------------------------------------------------------------->
      </div>
    </div>
    <div class="footer-container"></div>
  </div>
</body>

</html>
