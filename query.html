<!doctype html>
<html>

<head>
  <title> Consultas </title>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/frame.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/controls.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="css/custom.css" media="screen" rel="stylesheet" type="text/css" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="js/menu.js"></script>
  <style>
    .menu-query {
      color: rgb(255, 255, 255) !important;
      opacity: 1 !important;
      font-weight: 700 !important;
    }
  </style>
</head>

<body>
  <div class="menu-container"></div>
  <div class="content-container">
    <!--Start Header-->
    <div class="banner">
      <div class="banner-table flex-column" style="background-color: rgba(0, 0, 0, 0.5);">
        <div class="flex-row">
          <div class="flex-item flex-column">
            <h1 class="add-top-margin-small">Consultas, filtros y an√°lisis espaciales/temporales</h1>
          </div>
        </div>
      </div>
    </div>
        <!--End Header-->
    <!-------------------------------------------------------------------------------------------->    
    <div class="content">
      <div class="content-table flex-column">
        <!-------------------------------------------------------------------------------------------->
        <!--Start Text with Centered Image and Table-->
        <div class="flex-row">
          <div class="flex-item flex-column">
            <h2 id="centered-image-and-table" class="no-top-margin">Paneles de consultas, descargas y visualizaci√≥n </h2>
            <hr>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/Front_End_WEAP_WebAppRepWB.gif" target="_blank" class="image max-width-1000">
              <img src="img/Front_End_WEAP_WebAppRepWB.gif">
            </a>
          </div>
        </div>
        <div class="flex-row">   
          <p class="text text-center graph-title">
              1) Selecci√≥n de Mapas Base.
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros: Librer√≠a y repositorio SnazzyMaps en Google Maps JavaScript API para la creaci√≥n de los mapas base ‚ÄúAlta vegetaci√≥n‚Äù, ‚ÄúBaja vegetaci√≥n‚Äù y ‚ÄúAlto contraste‚Äù. 
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Configurar y definir cada uno de los mapas base, buscando personalizar y modificar el estilo visual utilizando los widgets ui.Buttom () y la funci√≥n onClick (activaci√≥n o desactivaci√≥n del mapa base).</li>
                  <li>Mapa base iconChange o alta vegetaci√≥n: Estilo minimalista con alto contraste, que invierte la luminosidad en el mapa y reduce el brillo general. Adem√°s, oculta determinados iconos (puntos de inter√©s, etiquetas, lugares administrativos, etc.). </li>
                  <li>Mapa base baseChange o baja vegetaci√≥n: Estilo con alto √©nfasis en elementos naturales (r√≠os, lagos, lagunas, monta√±as, cobertura vegetal, etc), invirtiendo la luminosidad y ocultando los mismos iconos que el iconChange</li>
                  <li>Mapa base Multibrand o alto contraste: Estilo detallado y sofisticado, ideal para branding o visualizaciones tem√°ticas, con etiquetas visibles y colores personalizados (carreteras, paisajes y agua en tonos oscuros). Asimismo, un alto contraste entre texto y fondo.</li>              
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte inferior izquierda del mapa, con la opci√≥n de seleccionar diferentes mapas base: Alta vegetaci√≥n, Baja vegetaci√≥n, Alto contraste, mapa de relevo y sat√©lite (estos dos √∫ltimos configurados por defecto en Google Earth Engine).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/1Basemaps.gif" target="_blank" class="image max-width-1000">
              <img src="img/1Basemaps.gif">
            </a>
          </div>
        </div>

            
        <div class="flex-row">   
          <p class="text text-center graph-title">
              2) Selecci√≥n de variable y actualizaci√≥n de leyenda
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros: ImageCollections mensuales y anuales diferenciadas para cada variable (Tas, Prec, Run, ETReal y ETRef) con sus respectivos valores m√≠nimos (.min) y m√°ximos (.max). Al igual que, diferentes simbolog√≠as y paletas de colores (10 intervalos) seg√∫n la variable.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Selector de variable usando ui.Select(): se crea un men√∫ desplegable con las variables mensuales y anuales, luego se llaman las funciones updateMap() y updateLegend() con la variable seleccionada.</li>
                  <li>Activaci√≥n de las funciones updateMap() y updateLegend(): la funci√≥n updateMap() permite adicionar la variable seleccionada al mapa principal (mapPanel), limpiando variables seleccionadas previamente. De la misma forma, la funci√≥n updateLegend() crea la leyenda seg√∫n la variable seleccionada con sus respectivos intervalos y valores.</li>
                  <li>Bot√≥n para limpiar la leyenda: se crea un ui.Buttom() que le permite al usuario limpiar la leyenda dentro de la aplicaci√≥n.</li>
                  <li>Adici√≥n de todos los √≠tems al panel m√°ster (master_panel) usando ui.Panel(): se hace un llamado al panel m√°ster declarado previamente y se le adicionan los √≠tems.</li>              
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte central izquierda dentro del mapa, con la opci√≥n de seleccionar tanto variables mensuales como anuales, con su respectiva legenda, paleta de colores y rangos (m√≠nimos y m√°ximos).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/2SelectMonthlyVariable.gif" target="_blank" class="image max-width-1000">
              <img src="img/2SelectMonthlyVariable.gif">
            </a>
          </div>
        </div>

               
        <div class="flex-row">   
          <p class="text text-center graph-title">
              3) Series de tiempo por puntos y variables
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros: ImageCollections mensuales y anuales diferenciadas para cada variable (Tas, Prec, Run, ETReal y ETRef) seg√∫n las unidades de medida, grados Celsius (¬∞C) para la temperatura y mil√≠metros para las dem√°s variables.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Cajas de texto para ingresar coordenadas lonInput y latInput usando ui.Textbox(): son creadas dos cajas de texto que reciben las coordenadas ingresadas por el usuario.</li>
                  <li>Selector de variable usando ui.Select(): se crea un men√∫ desplegable con las variables mensuales y anuales, para luego ser enviada la variable seleccionada como input.</li>
                  <li>Bot√≥n para generar el gr√°fico ui.Buttom(): bot√≥n que activa la creaci√≥n del punto, la selecci√≥n de la variable de inter√©s. Al igual que, un gr√°fico utilizando ui.Chart.image.series()</li>
                  <li>Gr√°fico de serie temporal usando ui.Chart.image.series(): gr√°fico de serie temporal que estima la media utilizando la t√©cnica de reducci√≥n ee.Reducer.mean()</li>
                  <li>Despliegue de todos los √≠tems anteriores usando ui.Panel(): una vez creada la consulta, se llaman los paneles inputPanel y chartPanel2, los cuales agregan los botones y gr√°ficos de series temporales en la parte visual de la aplicaci√≥n.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte central del panel de consultas, con la opci√≥n de insertar coordenadas (longitud y latitud) en la variable seleccionada. De la misma forma, se crea un bot√≥n que le permite al usuario visualizar o plotear las series de tiempo en el punto insertado. El gr√°fico creado en GEE permite descargar los datos consultados en formato (.csv).
                </p>
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/3QueryPoints.gif" target="_blank" class="image max-width-1000">
              <img src="img/3QueryPoints.gif">
            </a>
          </div>
        </div>


        <div class="flex-row">   
          <p class="text text-center graph-title">
              4) Series de tiempo dibujando pol√≠gonos y seleccionando variables 
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros: ImageCollections mensuales y anuales con su respectiva banda seg√∫n la variable (Tas, Prec, Run, ETReal y ETRef).
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Bot√≥n para empezar a dibujar un pol√≠gono usando ui.Buttom(): se crea un bot√≥n que le permite al usuario empezar a dibujar un pol√≠gono para luego enviar la ‚Äògeometr√≠a‚Äô del pol√≠gono a las funciones startDrawin() y drawingTools()</li>
                  <li>Selector de variable usando ui.Select(): se crea un men√∫ desplegable con las variables mensuales y anuales, para luego ser enviada la variable seleccionada como input.</li>
                  <li>Bot√≥n para crear el gr√°fico de la serie temporal usando ui.Buttom(): se crea un bot√≥n que activa las funciones previas junto con la funci√≥n plotTimeSeries()</li>
                  <li>Activaci√≥n de las funciones startDrawin(), drawingTools() plotTimeSeries(): Una vez el usuario realiza los pasos anteriores, GEE usara startDrawin() y drawingTools() para dibujar el pol√≠gono dentro del mapa. Posteriormente, la funci√≥n plotTimeSeries() recibir√° los par√°metros (variable y pol√≠gono) para la creaci√≥n del gr√°fico de serie temporal mediante ui.Chart.image.series()</li>
                  <li>Despliegue de todos los √≠tems anteriores usando ui.Panel(): una vez creada la consulta, se llama el panel chartPanel3, el cual agrega visualmente en la aplicaci√≥n los botones y gr√°ficos de las series temporales.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte inferior del panel de consultas (justo debajo de la consulta por puntos y coordenadas) con la opci√≥n de dibujar un pol√≠gono y una variable. Asimismo, se crea un bot√≥n que le permite al usuario visualizar o plotear las series de tiempo en base al pol√≠gono dibujado. El gr√°fico de la serie temporal permite descargar los datos consultados en formato (.csv).
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/4QueryDraPolygons.gif" target="_blank" class="image max-width-1000">
              <img src="img/4QueryDraPolygons.gif">
            </a>
          </div>
        </div>

          
        <div class="flex-row">   
          <p class="text text-center graph-title">
              5) Adici√≥n de im√°genes por fecha y variable 
            </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros:ImageCollections mensuales con sus respectivas bandas seg√∫n la variable (¬¥temperatura‚Äô, ¬¥precipitaci√≥n‚Äô, ‚Äòescorrent√≠a‚Äô, ‚Äòetreal‚Äô y ‚Äòetref‚Äô). Tambi√©n, se requiere de establecer los valores m√≠nimos (.min) y m√°ximos (.max), diferentes simbolog√≠as y paletas de colores (10 intervalos) por cada variable.
                </p>
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Selector de variable usando ui.Select(): se crea un menu desplegable con las diferentes variables mensuales para que el usuario seleccione una.</li>
                  <li>Barra deslizante din√°mica usando ui.DateSlider(): se crea un componente din√°mico que muestra todos los meses y a√±os comprendidos entre 1980 y 2020 para que el usuario seleccione un mes dentro de este intervalo.</li>
                  <li>Bot√≥n para adicionar la imagen mensual seleccionada usando ui.Buttom(): se crea un bot√≥n que recibe como par√°metro la imagen mensual seleccionada por el usuario.</li>
                  <li>Creaci√≥n de la funci√≥n displayImage_t(): se crea una funci√≥n que recibe la variable y el mes seleccionado por el usuario, para posteriormente activar el bot√≥n ‚ÄòAdicionar imagen(es) üñº‚Äô y enviar la imagen al mapa principal (mapPanel) de la aplicaci√≥n.</li>
                  <li>Despliegue de todos los √≠tems anteriores usando ui.Panel(): una vez creada la consulta, se llaman los paneles panel_sli y chartPanel4, los cuales agregan la selecci√≥n, la barra deslizante y el bot√≥n en la parte visual de la aplicaci√≥n.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de un panel localizado en la parte inferior derecha de la aplicaci√≥n (justo debajo de las consultas por puntos y pol√≠gonos) con la opci√≥n de agregar una o m√°s im√°genes al mapa principal. 
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/5QueryTimeSlider.gif" target="_blank" class="image max-width-1000">
              <img src="img/5QueryTimeSlider.gif">
            </a>
          </div>
        </div>


        <div class="flex-row">   
          <p class="text text-center graph-title">
              6) Importe de archivos externos (.Kml .Shp .GeoJSON) 
          </p>
                <p class="text" style="text-align: justify;">
                Inputs o par√°metros: ImageCollections mensuales con sus respectivas bandas seg√∫n la variable (¬¥temperatura‚Äô, ¬¥precipitaci√≥n‚Äô, ‚Äòescorrent√≠a‚Äô, ‚Äòetreal‚Äô y ‚Äòetref‚Äô). Al igual que, archivos de extensi√≥n Keyhole Markup Language (.KML), Shapefile (.shp) o GeoJSON.
                </p>

                <p class="text" style="text-align: justify;">
                Antes de realizar la inserci√≥n de los datos en GEE, el usuario debe primero de convertir los archivos de extensi√≥n .KML y .shp a GeoJSON, para ello puede utilizar herramientas online como https://mapshaper.org/.
                </p>             
          
            <p class="text" style="text-align: justify;">
               Acciones e instrucciones:
            </p>
            <ul>
                  <li>Creaci√≥n de un nuevo panel usando ui.Panel(): se crea un panel para mostrar diferentes widgets y funciones.</li>
                  <li>Selector de variable usando ui.Select(): se crea un men√∫ desplegable con las diferentes variables mensuales para que el usuario escoja una.</li>
                  <li>Cajas de texto para filtrar fechas (inicial y final) usando ui.Textbox(): son creadas dos cajas de texto para que el usuario ingrese fechas siguiendo el formato 'YYYY-MM.DD'.</li>
                  <li>Cajas de texto para ingresar el archivo GeoJSON usando ui.Textbox(): son creadas dos cajas de texto, la primera para que el usuario escriba el nombre del archivo GeoJSON a importar y la segunda para ingresar los atributos del archivo GeoJSON.</li>
                  <li>Creaci√≥n de la funci√≥n para leer archivos GeoJSON usando ui.Buttom(): se crea un bot√≥n que activa el proceso de lectura de los atributos del archivo GeoJSON (tipo de geometr√≠a, coordenadas, proyecci√≥n, etc.). Posteriormente, son enviados los atributos como par√°metros a una funci√≥n que agrega al mapa los atributos y crea el grafico de series de tiempo.</li>
                  <li>Despliegue de todos los √≠tems anteriores usando ui.Panel(): una vez creada la consulta, se llama un panel, el cual agrega visualmente en la aplicaci√≥n los botones y gr√°ficos de las series temporales.</li>
            </ul>
                   <p class="text" style="text-align: justify;">
                Outputs o resultados: Desarrollo de una interfaz localizada en la parte derecha inferior del panel de consultas, el cual le permite al usuario importar o cargar archivos GeoJSON en la aplicaci√≥n, crear gr√°ficos y consultas por series de tiempo. 
        <div class="flex-row-space-between">
          <div class="flex-item flex-column">
            <a href="https://github.com/sei-latam/Website_Sei_Latam_WEAP_Web_App_Rep_WB.com/blob/main/img/5QueryTimeSlider.gif" target="_blank" class="image max-width-1000">
              <img src="img/5QueryTimeSlider.gif">
            </a>
          </div>
        </div>

        <!-------------------------------------------------------------------------------------------->
        <!--Start Credits-->
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <p class="text text-small text-italic add-top-margin-large">
              Credits: <span class="highlight-text">Organization One</span>: Author One and Author Two / <span class="highlight-text">Organization Two</span>: Author Three and Author Four
            </p>
          </div>
        </div>
        <!--End Credits-->
        <!-------------------------------------------------------------------------------------------->
      </div>
    </div>
    <div class="footer-container"></div>
  </div>
</body>

</html>
